<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <link rel="stylesheet" href="style\menu.css">
</head>

<body>
    <header>
        <nav>
            <div id="leftNav">
                <img src="images\bfccc.jpg" alt="BFC" onclick="location.href='index.html';">
                <h3 onclick="location.href='menu.html';" id="menuBtn">Menu</h3>
                <h3 onclick="location.href='deals.html';" id="dealsBtn">Deals</h3>
            </div>
            <div id="rightNav">
                <h3 onclick="location.href='login.html'" id="signInBtn">Sign In</h3>
                <h3 style="color: gray; font-size: 30px;">|</h3>
                <h3 id="totalAmount">₹0</h3> 
                <img src="images\cartBucket.jpg" alt="" onclick="location.href='cart.html';">
            </div>
        </nav>
    </header>
    <div id="main_container">
        <div class="left-menu-section">
            <div class="menu-container">
                <div class="strips">
                    <span class="strip-lines"></span>
                    <span class="strip-lines"></span>
                    <span class="strip-lines"></span>
                </div>

                <h1 class="kfc-menu">BFC MENU</h1>

                <div class="outer-ul">
                    <p><a href="#chicken_bucket">Chicken Buckets</a></p>
                    <p><a href="#biryani_bucket">Biryani Buckets</a></p>
                    <p><a href="#box_meals">Box Meals</a></p>
                    <p><a href="#burgers">Burgers</a></p>
                    <p><a href="#stay_home_special">Stay Home Specials</a></p>
                    <p><a href="#snacks">Snacks</a></p>
                    <p><a href="#beverages">Beverages</a></p>
                </div>
            </div>
        </div>
        <div id="scroll">
            <div class="right-menu-section">
                <div id="main_search-bar">
                    <div><img src="https://online.kfc.co.in/static/media/searchIcon.0e00b33c.svg" alt=""></div>
                    <input type="text" id="main_searched_item" placeholder="Search our menu">
                </div>
                <hr>
                <div id="SearchedItem"></div>
                <div id="chicken_bucket">
                    <h2><a name="chicken_bucket">CHICKEN BUCKET</a></h2>
                    <div id="Chick_bucket"></div>
                </div>
                <div id="biryani_bucket" class="image_size">
                    <h2><a name="biryani_bucket">BIRYANI BUCKET</a></h2>
                    <div id="Biryani_bucket"></div>
                </div>
                <div id="box_meals" class="image_size">
                    <h2><a name="box_meals">BOX MEALS</a></h2>
                    <div id="Box_Meal"></div>
                </div>
                <div id="burgers" class="image_size">
                    <h2><a name="burgers">BURGERS</a></h2>
                    <div id="Burger"></div>
                </div>
                <div id="stay_home_specials" class="image_size">
                    <h2><a name="stay_home_special">STAY HOME SPECIALS</a></h2>
                    <div id="Stay_home"></div>
                </div>
                <div id="snacks" class="image_size">
                    <h2><a name="snacks">SNACKS</a></h2>
                    <div id="Snack"></div>
                </div>
                <div id="beverages" class="image_size">
                    <h2><a name="beverages">BEVERAGES</a></h2>
                    <div id="Beverage"></div>
                </div>
    
            </div>
        </div>
    </div>
   


    <!-- Footer Starts -->
<footer>
    <div id="Tfooter">
        <div id="rfooter">
            <img src="images\BFC Buckets.jpg" alt="">
        </div>
        <div id="linksF">
            <div class="linkCard">
                <a href="">BFC Foods</a>
                <a href="menu.html">Menu</a>
                <a href="">Order Lookup</a>
                <a href="">Gift Card</a>
                <a href="">Nutrition & Allergen</a>
            </div>
            <div class="linkCard">
                <a href="">Support</a>
                <a href="">Get Help</a>
                <a href="">Contact Us</a>
                <a href="">BFC Feedback</a>
                <a href="">Privacy Policy</a>
            </div>
            <div class="linkCard">
                <a href="">Legal</a>
                <a href="">Terms and Conditions</a>
                <a href="">Privacy Policy</a>
                <a href="">Disclaimer</a>
                <a href="">Caution Notice</a>
            </div>
            <div class="linkCard">
                <a href="">BFC India</a>
                <a href="">About BFC</a>
                <a href="">BFC Care</a>
                <a href="">Careers</a>
                <a href="">Our Golden Past</a>
            </div>
        </div>
        <div id="app">
            <img src="images\playstore.jpg" alt="">
            <img src="images\appstore.jpg" alt="">
        </div>
    </div>
    <div id="Dfooter">
        <p>Copyright © KFC Corporation 2021 All Rights Reserved</p>
    </div>
</footer>

    

</body>
<script>
    let chickenBucketContainer = document.getElementById("Chick_bucket");
    let biryaniBucketContainer = document.getElementById("Biryani_bucket");
    let boxMealsContainer = document.getElementById("Box_Meal");
    let burgersContainer = document.getElementById("Burger");
    let stayHomeSpecialsContainer = document.getElementById("Stay_home");
    let snacksContainer = document.getElementById("Snack");
    let beveragesContainer = document.getElementById("Beverage");

    let API ="http://localhost:3000/recipes";
    let arr=[];
    async function FetchData() {
        try {
            let request = await fetch(API);
            let data = await request.json();


            arr=data
            console.log(data);
            DisplayProduct(data)
        } catch (err) {
            console.log(err)
        }
    }
    FetchData()
    let CartArr = JSON.parse(localStorage.getItem("cart")) || [];

    function DisplayProduct(data) {
        

        chickenBucketContainer.innerHTML = "";
        biryaniBucketContainer.innerHTML = "";
        boxMealsContainer.innerHTML = "";
        burgersContainer.innerHTML = "";
        stayHomeSpecialsContainer.innerHTML = "";
        snacksContainer.innerHTML = "";
        beveragesContainer.innerHTML = "";
        

        data.forEach((product) => {

            let card = document.createElement("div");
            let image = document.createElement("img");
            let name = document.createElement("h3");
            let category = document.createElement("p");
            let details = document.createElement("p");
            let price = document.createElement("h4");
            let type = document.createElement("h4");
            let addToCartButton = document.createElement("button");


            type.textContent = product.type;
            image.src = product.image;
            name.textContent = product.name;
            category.textContent = product.category;
            price.textContent = `₹${product.price}`;
            details.textContent = product.description;
            addToCartButton.textContent = "Add to Cart";

            addToCartButton.addEventListener("click", () => {
                if (check(product)) {
                    alert("Product Already in Cart");
                } else {
                    CartArr.push({ ...product, quantity: 1 });
                    localStorage.setItem("cart", JSON.stringify(CartArr));
                    alert("Product Added To Cart");
                    location.reload();
                }
            });

            card.append(image, type, name, price, details, category, addToCartButton);


            if (product.category === "chicken bucket") {
                chickenBucketContainer.append(card);
            } else if (product.category === "biryani bucket") {
                biryaniBucketContainer.append(card);
            } else if (product.category === "box meals") {
                boxMealsContainer.append(card);
            } else if (product.category === "burgers") {
                burgersContainer.append(card);
            } else if (product.category === "stay home specials") {
                stayHomeSpecialsContainer.append(card);
            } else if (product.category === "desserts") {
                snacksContainer.append(card);
            } else if (product.category === "beverages") {
                beveragesContainer.append(card);
            }
        });

    }
    function check(product) {
        for (let i = 0; i < CartArr.length; i++) {

            if (CartArr[i].id === product.id) {
                return true;

            }
        }
        return false;
    }
    let Total=document.getElementById("totalAmount");
    let sum=0;
        for (let x = 0; x < CartArr.length;x++){
            sum+=CartArr[x].price;
        }

    Total.innerText=`₹${sum}`
   //Search Function
   let MainC=document.getElementById("chicken_bucket");
   let MainBir = document.getElementById("biryani_bucket")
   let MainBox = document.getElementById("box_meals")
   let MainBurger = document.getElementById("burgers")
   let MainSna = document.getElementById("snacks")
   let MainStay = document.getElementById("stay_home_specials")
   let MainBev = document.getElementById("beverages")


     let Display = document.getElementById("SearchedItem");
        let search = document.getElementById("main_searched_item")
        search.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {

                MainC.innerHTML="";
                MainBir.innerHTML="";
                MainBox.innerHTML="";
                MainBurger.innerHTML="";
                MainSna.innerHTML="";
                MainStay.innerHTML="";
                MainBev.innerHTML="";






                Display.innerHTML = "";
                chickenBucketContainer.innerHTML = "";
                biryaniBucketContainer.innerHTML = "";
                boxMealsContainer.innerHTML = "";
                burgersContainer.innerHTML = "";
                stayHomeSpecialsContainer.innerHTML = "";
                snacksContainer.innerHTML = "";
                beveragesContainer.innerHTML = "";
                

                let searchItem = search.value;
                console.log(searchItem)


                 let filtered = arr.filter((element) => {
                    if (
                        element.name.toUpperCase().includes(searchItem.toUpperCase()) ===
                        true
                    ) {
                        return true;
                    } else {
                        return false;
                    }
                });
                 filtered.forEach((product) => {

                    let card = document.createElement("div");
                    let image = document.createElement("img");
                    let name = document.createElement("h3");
                    let category = document.createElement("p");
                    let details = document.createElement("p");
                    let price = document.createElement("h4");
                    let type = document.createElement("h4");
                    let addToCartButton = document.createElement("button");


                    type.textContent = product.type;
                    image.src = product.image;
                    name.textContent = product.name;
                    category.textContent = product.category;
                    price.textContent = `₹${product.price}`;
                    details.textContent = product.description;
                    addToCartButton.textContent = "Add to Cart";

                    addToCartButton.addEventListener("click", () => {
                        if (check(product)) {
                            alert("Product Already in Cart");
                        } else {
                            CartArr.push({ ...product, quantity: 1 });
                            localStorage.setItem("cart", JSON.stringify(CartArr));
                            alert("Product Added To Cart");
                        }
                    });

                    card.append(image, type, name, price, details, category, addToCartButton);
                    Display.append(card)
                });
                
            }

        });

</script>

</html>